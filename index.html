<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-1.7.1.min.js" integrity="sha256-iBcUE/x23aI6syuqF7EeT/+JFBxjPs5zeFJEXxumwb0="
        crossorigin="anonymous"></script>

    
    <link rel="stylesheet" type="text/css" media="screen" href="css/styles.css" />
    <script src="js/scrollstory.min.js"></script>

    <!-- <script src="/general/multimedia/projects/map-scroll/js/scrollstory.min.js"></script> -->
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="/general/multimedia/projects/map-scroll/css/styles.css" /> -->

    
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>
        <div>
        <p>I love wafer I love cake gummies gummi bears I love I love. Dragée gingerbread pastry bonbon icing oat cake wafer icing. Jujubes pudding topping chocolate I love halvah tiramisu cheesecake.</p>

        <p>Candy croissant I love gummies I love bear claw I love. Icing macaroon bonbon cheesecake. Bonbon sesame snaps sweet roll dragée caramels candy canes ice cream.</p>

        <p>Gummies cheesecake I love bonbon brownie tart I love fruitcake sugar plum. Oat cake I love donut sweet roll biscuit marshmallow I love. Gummies I love caramels candy canes soufflé toffee.</p>

        <p>Sweet roll croissant jelly-o brownie dragée tiramisu candy canes liquorice. Gummies tart gingerbread chocolate cake chocolate cake dragée biscuit apple pie dragée. Jelly-o toffee I love lemon drops macaroon jelly-o. Carrot cake soufflé jelly oat cake cotton candy cookie.</p>

        <p>Powder apple pie gummies croissant muffin pudding bonbon cake chocolate. Caramels cake donut marshmallow. Pudding sugar plum chupa chups. Sweet roll pie I love muffin croissant.</p>

        <p>I love wafer I love cake gummies gummi bears I love I love. Dragée gingerbread pastry bonbon icing oat cake wafer icing. Jujubes pudding topping chocolate I love halvah tiramisu cheesecake.</p>

        <p>Candy croissant I love gummies I love bear claw I love. Icing macaroon bonbon cheesecake. Bonbon sesame snaps sweet roll dragée caramels candy canes ice cream.</p>

        <p>Gummies cheesecake I love bonbon brownie tart I love fruitcake sugar plum. Oat cake I love donut sweet roll biscuit marshmallow I love. Gummies I love caramels candy canes soufflé toffee.</p>

        <p>Sweet roll croissant jelly-o brownie dragée tiramisu candy canes liquorice. Gummies tart gingerbread chocolate cake chocolate cake dragée biscuit apple pie dragée. Jelly-o toffee I love lemon drops macaroon jelly-o. Carrot cake soufflé jelly oat cake cotton candy cookie.</p>

        <p>Powder apple pie gummies croissant muffin pudding bonbon cake chocolate. Caramels cake donut marshmallow. Pudding sugar plum chupa chups. Sweet roll pie I love muffin croissant.</p>

        <p>I love wafer I love cake gummies gummi bears I love I love. Dragée gingerbread pastry bonbon icing oat cake wafer icing. Jujubes pudding topping chocolate I love halvah tiramisu cheesecake.</p>

        <p>Candy croissant I love gummies I love bear claw I love. Icing macaroon bonbon cheesecake. Bonbon sesame snaps sweet roll dragée caramels candy canes ice cream.</p>

        <p>Gummies cheesecake I love bonbon brownie tart I love fruitcake sugar plum. Oat cake I love donut sweet roll biscuit marshmallow I love. Gummies I love caramels candy canes soufflé toffee.</p>

        <p>Sweet roll croissant jelly-o brownie dragée tiramisu candy canes liquorice. Gummies tart gingerbread chocolate cake chocolate cake dragée biscuit apple pie dragée. Jelly-o toffee I love lemon drops macaroon jelly-o. Carrot cake soufflé jelly oat cake cotton candy cookie.</p>

        <p>Powder apple pie gummies croissant muffin pudding bonbon cake chocolate. Caramels cake donut marshmallow. Pudding sugar plum chupa chups. Sweet roll pie I love muffin croissant.</p>

    </div>
    <div class='embed-max-width'>
        <div class='scroll-container'>
            <div class='scroll-map'>
                <div id="map"></div>
            </div>
            <div class='scroll-text'>
                    <div class='trigger' data-slug="oakledge">
                    <h2>Oakledge</h2>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                </div>
                <div class='trigger' data-slug="moran">
                    <h2>Moran</h2>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                </div>
                <div class='trigger' data-slug="north-beach">
                    <h2>North Beach</h2>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                    <p>this will scroll</p>
                </div>
            </div>
        </div>
    </div>
    <div>
        <p>I love wafer I love cake gummies gummi bears I love I love. Dragée gingerbread pastry bonbon icing oat cake wafer icing. Jujubes pudding topping chocolate I love halvah tiramisu cheesecake.</p>

        <p>Candy croissant I love gummies I love bear claw I love. Icing macaroon bonbon cheesecake. Bonbon sesame snaps sweet roll dragée caramels candy canes ice cream.</p>

        <p>Gummies cheesecake I love bonbon brownie tart I love fruitcake sugar plum. Oat cake I love donut sweet roll biscuit marshmallow I love. Gummies I love caramels candy canes soufflé toffee.</p>

        <p>Sweet roll croissant jelly-o brownie dragée tiramisu candy canes liquorice. Gummies tart gingerbread chocolate cake chocolate cake dragée biscuit apple pie dragée. Jelly-o toffee I love lemon drops macaroon jelly-o. Carrot cake soufflé jelly oat cake cotton candy cookie.</p>

        <p>Powder apple pie gummies croissant muffin pudding bonbon cake chocolate. Caramels cake donut marshmallow. Pudding sugar plum chupa chups. Sweet roll pie I love muffin croissant.</p>
    </div>

<script>

    var points = {
        "north-beach": {
            coordinates: [-73.240330, 44.492861],
            title: 'North Beach',
            number:1,
            zoom: 16
        },
        "moran": {
            coordinates: [-73.224055, 44.482168],
            title: 'Moran Plant',
            number:2,
            zoom: 16
        },
        "oakledge": {
            coordinates: [-73.22671, 44.45595],
            title: 'Oakledge Park',
            number:3,
            zoom: 16
        }
    };

    function update(lat, lng, zoom) {
        map.flyTo({
            center: [
                lat,
                lng
            ],
            zoom: zoom
        })
    }

    mapboxgl.accessToken = 'pk.eyJ1Ijoic2V2ZW5kYXlzIiwiYSI6ImNqaHRhOTFvcjBibjYzd280YXJmcW1zODEifQ.UB4MJkUMxA-M41CKQdv_JQ';
    var map = new mapboxgl.Map({
        container: 'map', // container id
        style: 'mapbox://styles/mapbox/satellite-v9', // stylesheet location
        center: [
            -73.213280,
            44.475864
        ],
        zoom: 13, // starting zoom
        pitch: 45,
        interactive: false
    });
    
    for (var key in points) {
        var el = document.createElement("div");
        el.className = 'marker';
        var numberFill = '<div class="marker-number">';
        numberFill += points[key].number;
        numberFill += '</div>';
        el.innerHTML += numberFill;
        
        new mapboxgl.Marker(el)
            .setLngLat(points[key].coordinates)
            .addTo(map)
    }
    
    (function () {


        function scrollstory() {
            // select elements using jQuery since it is a dependency
            var $graphicEl = jQuery('.scroll-container')
            var $graphicVisEl = $graphicEl.find('.scroll-map')

            // viewport height
            var viewportHeight = window.innerHeight
            var halfViewportHeight = Math.floor(viewportHeight / 2)

            // callback function when scrollStory detects item to trigger
            var handleItemFocus = function (event, item) {
                var step = item.data.step
                var slug = item.data.slug
                var lat = points[slug].coordinates[0]
                var lng = points[slug].coordinates[1]
                var zoom = points[slug].zoom
                update(lat, lng, zoom)
            }

            // instantiate scrollStory
            $graphicEl.scrollStory({
                contentSelector: '.trigger',
                triggerOffset: halfViewportHeight,
                itemfocus: handleItemFocus,
            })
        }

        scrollstory()

    })()
</script>
</body>
</html>